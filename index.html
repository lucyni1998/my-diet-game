<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡è¡¡é£²é£ŸæŒ‘æˆ° - å®Œæ•´çŸ¥è­˜åº«ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        
        :root {
            --bg-dark: #0f172a;
            --khaki-nut: #C3B091; 
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--bg-dark);
            color: white;
            height: 100vh;
            margin: 0;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* é¤ç›¤é…ç½®å®¹å™¨ */
        .plate-outer-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            gap: 40px; /* å¢åŠ é¤ç›¤èˆ‡ç­·å­çš„è·é›¢ */
            background: rgba(255,255,255,0.05);
            padding: 60px 80px;
            border-radius: 60px;
            border: 2px solid rgba(255,255,255,0.1);
        }

        .plate-main {
            position: relative;
            width: 480px;
            height: 340px;
            background-color: #1e293b;
            border-radius: 40px;
            border: 12px solid #334155;
            display: flex;
            gap: 10px;
            padding: 10px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        /* ç­·å­è£é£¾ */
        .chopsticks {
            display: flex;
            gap: 12px;
            height: 300px;
        }
        .chopstick {
            width: 10px;
            height: 100%;
            background: linear-gradient(to bottom, #ffffff, #e2e8f0);
            border-radius: 20px;
            box-shadow: 4px 4px 10px rgba(0,0,0,0.3);
        }

        .drop-zone {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .drop-zone.active {
            filter: brightness(1.3);
            transform: scale(1.02);
            box-shadow: inset 0 0 20px rgba(255,255,255,0.3);
        }

        .col-left { width: 25%; background-color: #ea580c; border-radius: 25px 8px 8px 25px; }
        .col-mid { width: 35%; background-color: #16a34a; border-radius: 8px; }
        .col-right { width: 40%; display: flex; flex-direction: column; gap: 10px; }
        
        #zone-milk {
            position: absolute; top: -30px; left: -30px; width: 110px; height: 110px;
            border-radius: 50%; background: #3b82f6; border: 6px solid #fff; z-index: 50;
        }
        #zone-oil {
            position: absolute; top: 50%; left: 60%; transform: translate(-50%, -50%);
            width: 80px; height: 80px; border-radius: 50%; 
            background: var(--khaki-nut);
            border: 4px solid #fff; z-index: 45;
        }
        #zone-protein { height: 48%; background-color: #db2777; border-radius: 8px 25px 8px 8px; }
        #zone-grain { height: 48%; background-color: #ca8a04; border-radius: 8px 8px 25px 8px; }

        .zone-label { font-weight: 900; pointer-events: none; text-align: center; color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }

        .food-pool {
            background: rgba(30, 41, 59, 0.8); border-radius: 24px; padding: 12px;
            border: 1px solid rgba(255,255,255,0.1); flex: 1; overflow-y: auto;
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px;
        }

        .food-card {
            cursor: grab; background: #334155; border-radius: 12px; padding: 10px 4px;
            text-align: center; transition: all 0.2s; border: 2px solid transparent;
        }
        .food-card:active { cursor: grabbing; }

        .placed-item {
            position: absolute; font-size: 3.5rem; z-index: 60; pointer-events: none;
            transform: translate(-50%, -50%); animation: itemPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes itemPop { from { transform: translate(-50%, -50%) scale(0); opacity: 0; } to { transform: translate(-50%, -50%) scale(1); opacity: 1; } }

        .sprite-bubble {
            background: white; color: #0f172a; padding: 12px; border-radius: 16px;
            font-weight: 800; font-size: 0.85rem; position: relative; margin-bottom: 10px;
            border: 3px solid #0ea5e9; text-align: center; width: 100%;
            animation: bubbleFloat 2s ease-in-out infinite;
        }
        @keyframes bubbleFloat { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        .sprite-bubble::after {
            content: ''; position: absolute; bottom: -12px; left: 50%; transform: translateX(-50%);
            border-width: 12px 10px 0; border-style: solid; border-color: #0ea5e9 transparent transparent;
        }

        /* çŸ¥è­˜åº« Modal æ¨£å¼ */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(15, 23, 42, 0.95);
            display: none; align-items: center; justify-content: center; z-index: 8000;
            padding: 20px;
        }
        .modal-content {
            background: #1e293b; width: 100%; max-width: 850px; max-height: 90vh;
            border-radius: 32px; border: 1px solid rgba(255,255,255,0.1);
            overflow-y: auto; padding: 40px; position: relative;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
    </style>
</head>
<body>

    <header class="w-full px-8 py-4 bg-slate-900 border-b border-white/5 flex justify-between items-center">
        <div class="flex items-center gap-4">
            <span class="text-4xl">ğŸ¥—</span>
            <div>
                <h1 class="text-xl font-black text-white tracking-widest">å‡è¡¡é£²é£ŸæŒ‘æˆ°</h1>
                <p class="text-[10px] text-sky-400 font-bold uppercase tracking-tighter">Educational Dynamic System v9.1</p>
            </div>
        </div>
        <div class="flex gap-8">
            <div class="flex flex-col items-center">
                <span class="text-[10px] text-slate-400 font-bold">å‰©é¤˜æ™‚é–“</span>
                <span id="timer-text" class="text-2xl font-black text-white">30s</span>
            </div>
            <div class="flex flex-col items-center">
                <span class="text-[10px] text-slate-400 font-bold">æ”¶é›†é€²åº¦</span>
                <div class="bg-sky-500/10 border border-sky-500/50 px-4 py-1 rounded-xl">
                    <span id="score-text" class="text-2xl font-black text-sky-400">0 / 6</span>
                </div>
            </div>
        </div>
    </header>

    <main class="flex-1 flex flex-row items-center justify-center gap-12 p-8 overflow-hidden">
        <div class="plate-outer-wrapper">
            <!-- é¤ç›¤ä¸»é«” -->
            <div class="plate-main" id="main-plate">
                <div id="zone-milk" class="drop-zone" data-category="milk"><span class="zone-label text-sm">ä¹³å“</span></div>
                <div id="zone-oil" class="drop-zone" data-category="oil"><span class="zone-label text-[10px] leading-tight">å …æœ<br>ç¨®å­</span></div>
                <div id="zone-fruit" class="drop-zone col-left" data-category="fruit"><span class="zone-label">æ°´æœ</span></div>
                <div id="zone-veg" class="drop-zone col-mid" data-category="vegetable"><span class="zone-label">è”¬èœ</span></div>
                <div class="col-right">
                    <div id="zone-protein" class="drop-zone" data-category="protein"><span class="zone-label">è±†é­šè›‹è‚‰</span></div>
                    <div id="zone-grain" class="drop-zone" data-category="grain"><span class="zone-label">å…¨ç©€é›œç³§</span></div>
                </div>
                <div id="placed-items-container" class="absolute inset-0 pointer-events-none"></div>
            </div>
            <!-- ç­·å­è£é£¾ -->
            <div class="chopsticks">
                <div class="chopstick"></div>
                <div class="chopstick"></div>
            </div>
        </div>

        <div class="flex flex-col gap-4 w-72 h-[500px]">
            <div class="flex flex-col items-center">
                <div id="sprite-bubble" class="sprite-bubble">æº–å‚™å¥½äº†å—ï¼Ÿ</div>
                <svg id="sprite-svg" class="w-20 h-20" viewBox="0 0 100 100">
                    <circle cx="50" cy="55" r="35" fill="#0ea5e9" />
                    <circle cx="38" cy="45" r="8" fill="white" />
                    <circle cx="62" cy="45" r="8" fill="white" />
                    <circle id="pupil-l" cx="40" cy="45" r="4" fill="#0f172a" />
                    <circle id="pupil-r" cx="60" cy="45" r="4" fill="#0f172a" />
                    <path id="sprite-mouth" d="M 40 65 Q 50 75 60 65" stroke="white" stroke-width="3" fill="none" stroke-linecap="round" />
                </svg>
            </div>
            <div class="food-pool" id="food-pool-grid"></div>
        </div>
    </main>

    <!-- å®Œæ•´çŸ¥è­˜åº«å½ˆçª— -->
    <div id="knowledge-modal" class="modal-overlay">
        <div class="modal-content">
            <button onclick="closeKnowledge()" class="absolute top-6 right-6 text-slate-400 hover:text-white text-2xl font-black">âœ•</button>
            <h2 class="text-3xl font-black text-sky-400 mb-6 flex items-center gap-3">
                <span>ğŸ“˜</span> ç‡Ÿé¤Šèˆ‡å¥åº·æ•™å­¸çŸ¥è­˜åº« (å…¨)
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-slate-200">
                <section>
                    <h3 class="text-xl font-bold text-white mb-2 border-l-4 border-orange-500 pl-3">ğŸŒ¾ å…¨ç©€é›œç³§é¡</h3>
                    <p class="text-xs leading-relaxed">ä¸»ç†±é‡ä¾†æºã€‚è¦æ³¨æ„<b>åœ°ç“œã€å—ç“œã€èŠ‹é ­ã€é¦¬éˆ´è–¯ã€è€ç‰ç±³</b>å‡å±¬æ­¤é¡ï¼Œè€Œéè”¬èœã€‚å»ºè­° 1/3 ç‚ºæœªç²¾è£½å…¨ç©€ã€‚</p>
                </section>
                <section>
                    <h3 class="text-xl font-bold text-white mb-2 border-l-4 border-green-500 pl-3">ğŸ¥¦ è”¬èœé¡</h3>
                    <p class="text-xs leading-relaxed">æä¾›çº–ç¶­èˆ‡æ¤åŒ–ç´ ã€‚é¡è‰²è¶Šæ·±ç‡Ÿé¤Šè¶Šé«˜ã€‚<b>ç‰ç±³ç­ã€å¤§ç•ªèŒ„ã€è‡é¡ã€è—»é¡</b>çš†å±¬è”¬èœé¡ã€‚</p>
                </section>
                <section>
                    <h3 class="text-xl font-bold text-white mb-2 border-l-4 border-pink-500 pl-3">ğŸŸ è±†é­šè›‹è‚‰é¡</h3>
                    <p class="text-xs leading-relaxed">è›‹ç™½è³ªä¾†æºã€‚å»ºè­°é †åºï¼š<b>è±† > é­š/æµ·é®® > è›‹ > è‚‰</b>ã€‚é¿å…åŠ å·¥è‚‰å“å¦‚åŸ¹æ ¹ã€è²¢ä¸¸ã€‚</p>
                </section>
                <section>
                    <h3 class="text-xl font-bold text-white mb-2 border-l-4 border-yellow-500 pl-3">ğŸ æ°´æœé¡</h3>
                    <p class="text-xs leading-relaxed">æä¾›ç¶­ç”Ÿç´ Cã€‚å»ºè­°æ¯é¤ä¸€å€‹æ‹³é ­å¤§ã€‚æ³¨æ„ï¼š<b>æ°´æœä¸èƒ½å–ä»£è”¬èœ</b>ï¼Œä¸”æœæ±ä¸ç­‰åŒæ–°é®®æ°´æœã€‚</p>
                </section>
                <section>
                    <h3 class="text-xl font-bold text-white mb-2 border-l-4 border-blue-500 pl-3">ğŸ¥› ä¹³å“é¡</h3>
                    <p class="text-xs leading-relaxed">è£œéˆ£é¦–é¸ã€‚åŒ…å«<b>é®®ä¹³ã€å„ªæ ¼ã€å„ªé…ªä¹³ã€èµ·å¸</b>ã€‚å»ºè­°æ¯å¤©æ—©æ™šå„å–ä¸€æ¯ (240ml)ã€‚</p>
                </section>
                <section>
                    <h3 class="text-xl font-bold text-white mb-2 border-l-4 border-amber-800 pl-3">ğŸ¥œ å …æœç¨®å­èˆ‡æ²¹è„‚</h3>
                    <p class="text-xs leading-relaxed">ç¶­æŒæ©Ÿèƒ½ã€‚<b>èŠ±ç”Ÿã€æ ¸æ¡ƒã€èŠéº»</b>å±¬æ–¼å …æœé¡ã€‚æ³¨æ„ï¼š<b>é…ªæ¢¨</b>åœ¨ç‡Ÿé¤Šå­¸ä¸Šåˆ†é¡ç‚ºã€Œæ²¹è„‚é¡ã€è€Œéæ°´æœã€‚</p>
                </section>
                <section class="md:col-span-2 bg-slate-800/50 p-6 rounded-2xl">
                    <h3 class="text-xl font-bold text-white mb-3 flex items-center gap-2">ğŸ’¡ æˆ‘çš„é¤ç›¤å£è¨£ (èƒŒèµ·ä¾†å°±ä¸æœƒå¿˜ï¼)</h3>
                    <ul class="grid grid-cols-2 md:grid-cols-3 gap-3 text-xs font-bold text-slate-300">
                        <li class="bg-slate-900 p-2 rounded">æ¯å¤©æ—©æ™šä¸€ç¢—å¥¶</li>
                        <li class="bg-slate-900 p-2 rounded">æ¯é¤æ°´æœæ‹³é ­å¤§</li>
                        <li class="bg-slate-900 p-2 rounded">èœæ¯”æ°´æœå¤šä¸€é»</li>
                        <li class="bg-slate-900 p-2 rounded">é£¯è·Ÿè”¬èœä¸€æ¨£å¤š</li>
                        <li class="bg-slate-900 p-2 rounded">è±†é­šè›‹è‚‰ä¸€æŒå¿ƒ</li>
                        <li class="bg-slate-900 p-2 rounded">å …æœç¨®å­ä¸€èŒ¶åŒ™</li>
                    </ul>
                </section>
            </div>
            <button onclick="closeKnowledge()" class="mt-8 w-full bg-sky-500 py-4 rounded-xl font-black hover:bg-sky-400 transition-colors">æˆ‘çœ‹å®Œäº†ï¼Œè¿”å›éŠæˆ²</button>
        </div>
    </div>

    <!-- é–‹å§‹/çµç®—é®ç½© -->
    <div id="start-mask" class="fixed inset-0 z-[6000] bg-slate-950 flex flex-col items-center justify-center">
        <div class="text-[120px] mb-4">ğŸ±</div>
        <h1 class="text-4xl font-black text-white mb-2">æˆ‘çš„é¤ç›¤ä»»å‹™</h1>
        <p class="text-sky-400 font-bold mb-10 tracking-[0.3em]">å‹•æ…‹éš¨æ©Ÿæ•™å­¸ç‰ˆ</p>
        <button onclick="startGame()" class="bg-white text-slate-950 px-12 py-4 rounded-full font-black text-xl hover:scale-105 transition-all">é–‹å§‹æŒ‘æˆ°</button>
    </div>

    <div id="end-screen" class="fixed inset-0 z-[5000] hidden flex items-center justify-center bg-slate-950/90 backdrop-blur-md">
        <div class="bg-slate-900 p-10 rounded-[40px] text-center border border-white/10 shadow-2xl w-[400px]">
            <div id="end-icon" class="text-8xl mb-4">ğŸ†</div>
            <h2 id="end-title" class="text-3xl font-black mb-2 text-white">ä»»å‹™æˆåŠŸ</h2>
            <p id="end-msg" class="text-slate-400 mb-8">åšå¾—å¥½ï¼é¤ç›¤æ¯”ä¾‹éå¸¸å®Œç¾ã€‚</p>
            <div class="flex flex-col gap-3">
                <button onclick="openKnowledge()" class="bg-sky-500/20 text-sky-400 border border-sky-500/50 px-8 py-4 rounded-2xl font-black text-lg hover:bg-sky-500/30 transition-all">ğŸ’¡ æŸ¥çœ‹ç‡Ÿé¤Šæ•™å­¸çŸ¥è­˜åº«</button>
                <button onclick="resetGame()" class="bg-white text-slate-950 px-8 py-4 rounded-2xl font-black text-lg hover:scale-105 transition-all">å†æ¬¡æŒ‘æˆ°</button>
            </div>
        </div>
    </div>

    <script>
        const foodDatabase = {
            fruit: [{ name: 'ç´…è˜‹æœ', icon: 'ğŸ' }, { name: 'é»ƒé¦™è•‰', icon: 'ğŸŒ' }, { name: 'ç´…è¥¿ç“œ', icon: 'ğŸ‰' }, { name: 'é’èŠ­æ¨‚', icon: 'ğŸ' }],
            vegetable: [{ name: 'èŠ±æ¤°èœ', icon: 'ğŸ¥¦' }, { name: 'ç´…è˜¿è””', icon: 'ğŸ¥•' }, { name: 'å¤§ç•ªèŒ„', icon: 'ğŸ…' }, { name: 'é’æ±Ÿèœ', icon: 'ğŸ¥¬' }],
            grain: [{ name: 'ç³™ç±³é£¯', icon: 'ğŸš' }, { name: 'ç´…åœ°ç“œ', icon: 'ğŸ ' }, { name: 'å—ç“œ', icon: 'ğŸƒ' }, { name: 'é¦¬éˆ´è–¯', icon: 'ğŸ¥”' }],
            protein: [{ name: 'é¯›é­šç‰‡', icon: 'ğŸŸ' }, { name: 'è·åŒ…è›‹', icon: 'ğŸ³' }, { name: 'æ¿è±†è…', icon: 'ğŸ§Š' }, { name: 'å«©é›è…¿', icon: 'ğŸ—' }],
            milk: [{ name: 'é®®ä¹³', icon: 'ğŸ¥›' }, { name: 'å„ªæ ¼', icon: 'ğŸ¦' }, { name: 'èµ·å¸', icon: 'ğŸ§€' }],
            oil: [{ name: 'èŠ±ç”Ÿ', icon: 'ğŸ¥œ' }, { name: 'è…°æœ', icon: 'ğŸŒ°' }, { name: 'æ ¸æ¡ƒ', icon: 'ğŸ¥¨' }],
            junk: [{ name: 'ç‚¸è–¯æ¢', icon: 'ğŸŸ' }, { name: 'ç”œç”œåœˆ', icon: 'ğŸ©' }, { name: 'å¯æ¨‚', icon: 'ğŸ¥¤' }]
        };

        const spriteScripts = {
            intro: ["æº–å‚™å¥½æŒ‘æˆ°ç‡Ÿé¤ŠçŸ¥è­˜äº†å—ï¼Ÿ", "è®“æˆ‘å€‘ä¾†é…ç½®å®Œç¾çš„é¤ç›¤å§ï¼"],
            correct: ["æ­£ç¢ºï¼é€™éå¸¸æœ‰ç‡Ÿé¤Šã€‚", "å°ˆå®¶ç­‰ç´šçš„é¸æ“‡ï¼"],
            error: ["æ”¾éŒ¯ä½ç½®äº†ï¼Œå†æƒ³æƒ³çœ‹ï¼Ÿ", "é¡åˆ¥æéŒ¯äº†ï¼Œå†è©¦è©¦ã€‚"],
            junk: ["å“å‘€ï¼é‚£æ˜¯åŠ å·¥é£Ÿå“ï¼Œä¸èƒ½å…¥ç›¤å–”ï¼"],
            hurry: ["æ™‚é–“å¿«åˆ°å›‰ï¼ŒåŠ æ²¹ï¼"],
            alreadyHave: ["é€™ä¸€é¡å·²ç¶“æ”å–è¶³å¤ å›‰ï¼"]
        };

        let timeLeft = 30, collectedCategories = new Set(), timerInterval = null, isGameRunning = false, draggedElement = null;

        function getRandomMsg(type) { return spriteScripts[type][Math.floor(Math.random() * spriteScripts[type].length)]; }
        function openKnowledge() { document.getElementById('knowledge-modal').style.display = 'flex'; }
        function closeKnowledge() { document.getElementById('knowledge-modal').style.display = 'none'; }
        function startGame() { document.getElementById('start-mask').style.display = 'none'; initGame(); }
        function resetGame() { document.getElementById('end-screen').classList.add('hidden'); initGame(); }

        function initGame() {
            isGameRunning = true; timeLeft = 30; collectedCategories = new Set();
            document.getElementById('score-text').innerText = '0 / 6';
            document.getElementById('timer-text').innerText = '30s';
            document.getElementById('placed-items-container').innerHTML = '';
            if (timerInterval) clearInterval(timerInterval);
            refreshFoodPool(); startTimer();
            updateSprite(getRandomMsg('intro'), 'happy');
        }

        function refreshFoodPool() {
            const grid = document.getElementById('food-pool-grid');
            grid.innerHTML = '';
            let pool = [];
            Object.keys(foodDatabase).forEach(cat => {
                if(cat === 'junk') return;
                const item = foodDatabase[cat][Math.floor(Math.random()*foodDatabase[cat].length)];
                pool.push({...item, category: cat});
            });
            foodDatabase.junk.slice(0,2).forEach(j => pool.push({...j, category: 'junk'}));
            pool.sort(() => 0.5 - Math.random()).forEach(item => {
                const card = document.createElement('div');
                card.className = 'food-card'; card.draggable = true;
                card.innerHTML = `<div class="text-3xl">${item.icon}</div><div class="text-[9px] font-black text-slate-400 uppercase mt-1">${item.name}</div>`;
                card.dataset.category = item.category; card.dataset.icon = item.icon;
                card.ondragstart = (e) => { draggedElement = card; card.style.opacity = '0.4'; };
                card.ondragend = () => { draggedElement = null; card.style.opacity = '1'; };
                grid.appendChild(card);
            });
            setupDropZones();
        }

        function setupDropZones() {
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.ondragover = (e) => { e.preventDefault(); zone.classList.add('active'); };
                zone.ondragleave = () => zone.classList.remove('active');
                zone.ondrop = (e) => { e.preventDefault(); zone.classList.remove('active'); handleDrop(zone); };
            });
        }

        function handleDrop(zone) {
            if (!draggedElement || !isGameRunning) return;
            const foodCat = draggedElement.dataset.category;
            const zoneCat = zone.dataset.category;
            if (foodCat === 'junk') { updateSprite(getRandomMsg('junk'), 'sad'); return; }
            if (foodCat === zoneCat) {
                if (collectedCategories.has(foodCat)) { updateSprite(getRandomMsg('alreadyHave'), 'happy'); return; }
                collectedCategories.add(foodCat);
                document.getElementById('score-text').innerText = `${collectedCategories.size} / 6`;
                const zRect = zone.getBoundingClientRect();
                const pRect = document.getElementById('main-plate').getBoundingClientRect();
                const emoji = document.createElement('div');
                emoji.className = 'placed-item';
                emoji.style.left = (zRect.left - pRect.left + zRect.width / 2) + 'px';
                emoji.style.top = (zRect.top - pRect.top + zRect.height / 2) + 'px';
                emoji.innerText = draggedElement.dataset.icon;
                document.getElementById('placed-items-container').appendChild(emoji);
                draggedElement.style.visibility = 'hidden';
                updateSprite(getRandomMsg('correct'), 'happy');
                if (collectedCategories.size === 6) endLevel(true);
            } else { updateSprite(getRandomMsg('error'), 'thinking'); }
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                if (!isGameRunning) return;
                timeLeft--;
                document.getElementById('timer-text').innerText = timeLeft + 's';
                if (timeLeft === 10) updateSprite(getRandomMsg('hurry'), 'thinking');
                if (timeLeft <= 0) endLevel(false);
            }, 1000);
        }

        function updateSprite(msg, mood) {
            document.getElementById('sprite-bubble').innerText = msg;
            const mouth = document.getElementById('sprite-mouth');
            if (mood === 'happy') mouth.setAttribute('d', 'M 40 65 Q 50 75 60 65');
            else if (mood === 'thinking') mouth.setAttribute('d', 'M 40 68 Q 50 68 60 68');
            else if (mood === 'sad') mouth.setAttribute('d', 'M 40 72 Q 50 62 60 72');
        }

        function endLevel(isWin) {
            isGameRunning = false; clearInterval(timerInterval);
            const screen = document.getElementById('end-screen');
            screen.classList.remove('hidden');
            if (isWin) {
                document.getElementById('end-icon').innerText = 'ğŸ†';
                document.getElementById('end-title').innerText = 'ä»»å‹™é”æˆï¼';
                document.getElementById('end-msg').innerText = 'ä½ é…ç½®äº†ä¸€å€‹å®Œç¾çš„å‡è¡¡é¤ç›¤ï¼';
            } else {
                document.getElementById('end-icon').innerText = 'âŒ›';
                document.getElementById('end-title').innerText = 'æ™‚é–“åˆ°ï¼';
                document.getElementById('end-msg').innerText = 'å·®ä¸€é»é»ï¼Œé»æ“Šä¸‹æ–¹æŒ‰éˆ•è¤‡ç¿’ä¸€ä¸‹åˆ†é¡å§ï¼';
            }
        }
    </script>
</body>
</html>
